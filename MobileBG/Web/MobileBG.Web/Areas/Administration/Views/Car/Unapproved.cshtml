@using MobileBG.Web.ViewModels.Cars

@model SearchCarViewModel
<form id="approve" method="post"></form>

@if (this.TempData.ContainsKey("Success"))
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        <strong>@this.TempData["Success"]</strong>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
}

@if (this.TempData.ContainsKey("Danger"))
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <strong>@this.TempData["Danger"]</strong>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
}

<div class="container">
    <div class="row">
        @foreach (var car in @Model.Cars)
        {
            <div class="card p-1 m-2" style="width:16rem;">
                <img class="card-img-top" src="@car.ImageUrl" style="max-height:150px" alt="Card image cap">
                <div class="card-body">
                    <h5 class="card-title">@car.MakeName @car.ModelName @car.Price</h5>
                    <p class="card-text">Some .</p>
                </div>
                <div class="card-footer">
                    <button form="carsForm" class="btn btn-primary btn-sm m-1" type="submit" asp-area="" asp-controller="Car" asp-action="Details" asp-route-id="@car.Id">View</button>
                    <button form="approve" class="btn btn-success btn-sm m-1"  onsubmit="if(confirm(\'are you sure ?\')){ this.form.submit() }" type="submit" asp-area="Administration" asp-controller="Car" asp-action="Approve" asp-route-id="@car.Id">Approve</button>
                    <button form="carsForm" class="btn btn-danger btn-sm" type="submit" asp-area="" asp-controller="Car" asp-action="Details" asp-route-id="@car.Id">Delete</button>
                </div>
            </div>
        }
    </div>
</div>

<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>

<nav aria-label="...">
    <ul class="pagination justify-content-center">
        <li class="page-item @if (!Model.HasPreviousPage) {
        <text>disabled</text>
        }">
            <a class="page-link" asp-controller="Car" asp-action="Unapproved" asp-route-id="@Model.FirstPageNumber" onclick="location.href=this.href+window.location.search;return false;"><strong>First</strong></a>
        </li>
        <li class="page-item @if (!Model.HasPreviousPage) {
        <text>disabled</text>
 }">
            <a class="page-link" asp-controller="Car" asp-action="Unapproved" asp-route-id="@Model.PreviousPageNumber" onclick="location.href=this.href+window.location.search;return false;"><strong>Previous</strong></a>
        </li>
        @for (int i = Model.PageNumber - 2; i < Model.PageNumber; i++)
        {
            if (i > 0)
            {
                <li class="page-item"><a class="page-link" asp-controller="Car" asp-action="Unapproved" asp-route-id="@i" onclick="location.href=this.href+window.location.search;return false;">@i</a></li>
            }

        }
        <li class="page-item active" aria-current="page">
            <span class="page-link">
                @Model.PageNumber
                <span class="sr-only">(current)</span>
            </span>
        </li>
        @for (int i = Model.PageNumber + 1; i <= Model.PageNumber + 2; i++)
        {
            if (i <= Model.PagesCount)
            {
                <li class="page-item"><a class="page-link" asp-controller="Car" asp-action="Unapproved" asp-route-id="@i" onclick="location.href=this.href+window.location.search;return false;">@i</a></li>
            }

        }
        <li class="page-item @if (!Model.HasNextPage) {
        <text>disabled</text>
 }">
            <a class="page-link" asp-controller="Car" asp-action="Unapproved" asp-route-id="@Model.NextPageNumber" onclick="location.href=this.href+window.location.search;return false;"><strong>Next</strong></a>
        </li>
        <li class="page-item @if (!Model.HasNextPage) {
        <text>disabled</text>
 }">
            <a class="page-link" asp-controller="Car" asp-action="Unapproved" asp-route-id="@Model.LastPageNumber" onclick="location.href=this.href+window.location.search;return false;"><strong>Last</strong></a>
        </li>
    </ul>
</nav>
